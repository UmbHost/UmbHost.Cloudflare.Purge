{"version":3,"file":"dashboard-D32AahAo.js","sources":["../../../Client/src/dashboard.ts"],"sourcesContent":["import {css, html, customElement, ifDefined, state} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UUIButtonState } from '@umbraco-cms/backoffice/external/uui';\r\nimport {UmbLitElement} from '@umbraco-cms/backoffice/lit-element';\r\nimport {UmbNotificationContext, UmbNotificationDefaultData, UMB_NOTIFICATION_CONTEXT,} from '@umbraco-cms/backoffice/notification';\r\nimport {UmbModalManagerContext, UMB_CONFIRM_MODAL, UMB_MODAL_MANAGER_CONTEXT} from '@umbraco-cms/backoffice/modal'\r\n\r\n@customElement('umbhost-cloudflare-purge-dashboard')\r\nexport class UmbHostCloudflarePurgeDashboardElement extends UmbLitElement {\r\n\r\n  private _notificationContext?: UmbNotificationContext;\r\n  #modalContext?: UmbModalManagerContext;\r\n\r\n  @state()\r\n  private purgeEverythingButtonState?: UUIButtonState;\r\n\r\n  @state()\r\n  private customPurgeButtonState?: UUIButtonState;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_NOTIFICATION_CONTEXT, (notificationContext) => {\r\n\t\t\tthis._notificationContext = notificationContext;\r\n\t\t});\r\n\r\n    this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (_instance) => {\r\n      this.#modalContext = _instance;\r\n  });\r\n\t}\r\n\r\n\tasync #handlePurgeEverything() {\r\n    this.purgeEverythingButtonState = 'waiting';\r\n\r\n    const modalHandler = this.#modalContext?.open(this, UMB_CONFIRM_MODAL, {\r\n      data: {\r\n          headline: this.localize.term(\"umbhostCloudflarePurge_confirmpurgeeverythingtitle\"),\r\n          content: this.localize.term(\"umbhostCloudflarePurge_confirmpurgeeverythingcontent\"),\r\n      }\r\n    });\r\n    const result = await modalHandler?.onSubmit().then(() => {\r\n      const data: UmbNotificationDefaultData = { headline: this.localize.term(\"umbhostCloudflarePurge_purgesuccesstitle\"), message: this.localize.term(\"umbhostCloudflarePurge_purgesuccesscontent\") };\r\n      this._notificationContext?.peek('positive', { data });\r\n  \r\n      this.purgeEverythingButtonState = 'success';\r\n      return;\r\n\t\t}).catch(() => undefined);\r\n\r\n    this.purgeEverythingButtonState = undefined;\r\n\t}\r\n\r\n  async #handleCustomPurge() {\r\n    this.customPurgeButtonState = 'waiting';\r\n\r\n    const modalHandler = this.#modalContext?.open(this, UMB_CONFIRM_MODAL, {\r\n      data: {\r\n          headline: this.localize.term(\"umbhostCloudflarePurge_confirmcustompurgetitle\"),\r\n          content: this.localize.term(\"umbhostCloudflarePurge_confirmcustompurgecontent\"),\r\n      }\r\n    });\r\n    const result = await modalHandler?.onSubmit().then(() => {\r\n      const data: UmbNotificationDefaultData = { headline: this.localize.term(\"umbhostCloudflarePurge_purgesuccesstitle\"), message: this.localize.term(\"umbhostCloudflarePurge_purgesuccesscontent\") };\r\n      this._notificationContext?.peek('positive', { data });\r\n  \r\n      this.customPurgeButtonState = 'success';\r\n      return;\r\n\t\t})\r\n    .catch(() => undefined);\r\n\t}\r\n\r\n    override render() {\r\n        return html`\r\n        <umb-workspace-editor>\r\n          <div slot=\"actions\">\r\n            <uui-button\r\n            pristine=\"\"\r\n            label=${this.localize.term(\"umbhostCloudflarePurge_purgeeverything\")}\r\n            @click=\"${() => this.#handlePurgeEverything()}\"\r\n            state=${ifDefined(this.purgeEverythingButtonState)}\r\n            look=\"secondary\"\r\n            color=\"positive\"\r\n            ></uui-button>\r\n            <uui-button\r\n            pristine=\"\"\r\n            label=${this.localize.term(\"umbhostCloudflarePurge_custompurge\")}\r\n            @click=\"${() => this.#handleCustomPurge()}\"\r\n            state=${ifDefined(this.customPurgeButtonState)}\r\n            look=\"primary\"\r\n            color=\"positive\"\r\n            ></uui-button>\r\n          </div>\r\n          <div id=\"main\">\r\n            <uui-box headline=${this.localize.term(\"umbhostCloudflarePurge_headline\")}>\r\n                <umb-localize key=\"umbhostCloudflarePurge_introduction\">Welcome</umb-localize>\r\n                <uui-label for=\"purgeUrls\" required=\"\">\r\n                  <umb-localize key=\"umbhostCloudflarePurge_urls\"></umb-localize></uui-label>\r\n                <uui-textarea id=\"purgeUrls\" rows=\"10\" required=\"\"></uui-textarea>\r\n            </uui-box>\r\n          </div>\r\n        </umb-workspace-editor>\r\n    `;\r\n    }\r\n\r\n    static override readonly styles = [\r\n        css`\r\n            #main {\r\n                display: block;\r\n                flex: 1 1 0%;\r\n                flex-direction: column;\r\n                overflow-y: auto;\r\n                padding: var(--uui-size-layout-1);\r\n            }\r\n        `,\r\n    ];\r\n}\r\n\r\nexport default UmbHostCloudflarePurgeDashboardElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'umbhost-cloudflare-purge-cdn-dashboard': UmbHostCloudflarePurgeDashboardElement;\r\n    }\r\n}"],"names":["_modalContext","_UmbHostCloudflarePurgeDashboardElement_instances","handlePurgeEverything_fn","handleCustomPurge_fn","UmbHostCloudflarePurgeDashboardElement","UmbLitElement","__privateAdd","UMB_NOTIFICATION_CONTEXT","notificationContext","UMB_MODAL_MANAGER_CONTEXT","_instance","__privateSet","html","__privateMethod","ifDefined","modalHandler","_a","__privateGet","UMB_CONFIRM_MODAL","data","css","__decorateClass","state","customElement","UmbHostCloudflarePurgeDashboardElement$1"],"mappings":"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"}