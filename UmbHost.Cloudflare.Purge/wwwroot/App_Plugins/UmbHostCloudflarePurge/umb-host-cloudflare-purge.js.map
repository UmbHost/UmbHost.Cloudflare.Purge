{"version":3,"file":"umb-host-cloudflare-purge.js","sources":["../../../Client/src/tree-entity.action.ts","../../../Client/src/bundle.manifests.ts"],"sourcesContent":["import { UmbEntityActionArgs, UmbEntityActionBase } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbModalManagerContext, UMB_MODAL_MANAGER_CONTEXT, UMB_CONFIRM_MODAL } from '@umbraco-cms/backoffice/modal'\r\nimport { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbLocalizationController } from '@umbraco-cms/backoffice/localization-api';\r\n\r\nexport class PurdeCdnEntityAction extends UmbEntityActionBase<never> {\r\n    #modalContext?: UmbModalManagerContext;\r\n    #localize = new UmbLocalizationController(this);\r\n\r\n    constructor(host: UmbControllerHost, args: UmbEntityActionArgs<never>) {\r\n        super(host, args);\r\n\r\n        // Fetch/consume the contexts & assign to the private fields\r\n        this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n            this.#modalContext = instance;\r\n        });\r\n    }\r\n\r\n    async execute() {\r\n        const modalHandler = this.#modalContext?.open(this, UMB_CONFIRM_MODAL, {\r\n            data: {\r\n                headline: this.#localize.term(\"umbhostCloudflarePurge_confirmpurgecdnentityactiontitle\"),\r\n                content: this.#localize.term(\"umbhostCloudflarePurge_confirmpurgecdnentityactioncontent\"),\r\n                color: 'danger',\r\n            }\r\n        });\r\n\r\n        await modalHandler?.onSubmit().then(() => {\r\n            console.log('submit');\r\n        }).catch(() => {\r\n            console.log('cancel');\r\n        });\r\n    }\r\n}","import { UMB_DOCUMENT_ENTITY_TYPE } from \"@umbraco-cms/backoffice/document\";\r\nimport { PurdeCdnEntityAction } from \"./tree-entity.action\"\r\n\r\nconst dashboardManifest = {\r\n  type: 'dashboard',\r\n  alias: 'umbhost-cloudflare-purge-dashboard',\r\n  name: 'Cloudflare CDN Purge Dashboard',\r\n  element: () => import('./dashboard'),\r\n  elementName: \"umbhost-cloudflare-purge-dashboard\",\r\n  weight: 30,\r\n  meta: {\r\n    label: \"Cloudflare CDN Purge Dashboard\",\r\n    pathname: \"umbhost-cloudflare-purge-dashboard\"\r\n  },\r\n  conditions: [\r\n    {\r\n      alias: \"Umb.Condition.SectionAlias\",\r\n      match: \"Umb.Section.Content\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst purgeCdnEntityActionManifest = {\r\n\ttype: 'entityAction',\r\n\talias: 'umbhost-cloudflare-purge-cdn-entity-action',\r\n\tname: 'Cloudflare CDN Purge Entity Action',\r\n  kind: 'default',\r\n\tweight: 50,\r\n\tapi: PurdeCdnEntityAction,\r\n\tforEntityTypes: [ UMB_DOCUMENT_ENTITY_TYPE ],\r\n\tmeta: {\r\n\t\ticon: 'icon-cloud',\r\n\t\tlabel: '#umbhostCloudflarePurge_entityactionlabel'\r\n\t},\r\n};\r\n\r\nconst localization = {\r\n    type: \"localization\",\r\n    alias: \"umbhost-cloudflare-purge-localize-en\",\r\n    name: \"Cloudflare CDN Purge Localization\",\r\n    meta: {\r\n      \"culture\": \"en\"\r\n    },\r\n    js : ()=> import('./localization/en')\r\n};\r\n\r\nexport const manifests: Array<UmbExtensionManifest> = [\r\n  dashboardManifest,\r\n  localization,\r\n  purgeCdnEntityActionManifest\r\n];"],"names":["PurdeCdnEntityAction","UmbEntityActionBase","host","args","__privateAdd","_modalContext","_localize","UmbLocalizationController","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","modalHandler","_a","__privateGet","UMB_CONFIRM_MODAL","dashboardManifest","purgeCdnEntityActionManifest","UMB_DOCUMENT_ENTITY_TYPE","localization","manifests"],"mappings":";;;;;;;;;;AAKO,MAAMA,UAA6BC,EAA2B;AAAA,EAIjE,YAAYC,GAAyBC,GAAkC;AACnE,UAAMD,GAAMC,CAAI;AAJpB,IAAAC,EAAA,MAAAC;AACA,IAAAD,EAAA,MAAAE,GAAY,IAAIC,EAA0B,IAAI;AAMrC,SAAA,eAAeC,GAA2B,CAACC,MAAa;AACzD,MAAAC,EAAA,MAAKL,GAAgBI;AAAA,IAAA,CACxB;AAAA,EAAA;AAAA,EAGL,MAAM,UAAU;;AACZ,UAAME,KAAeC,IAAAC,EAAA,MAAKR,OAAL,gBAAAO,EAAoB,KAAK,MAAME,GAAmB;AAAA,MACnE,MAAM;AAAA,QACF,UAAUD,EAAA,MAAKP,GAAU,KAAK,yDAAyD;AAAA,QACvF,SAASO,EAAA,MAAKP,GAAU,KAAK,2DAA2D;AAAA,QACxF,OAAO;AAAA,MAAA;AAAA,IACX;AAGJ,WAAMK,KAAA,gBAAAA,EAAc,WAAW,KAAK,MAAM;AACtC,cAAQ,IAAI,QAAQ;AAAA,IAAA,GACrB,MAAM,MAAM;AACX,cAAQ,IAAI,QAAQ;AAAA,IAAA;AAAA,EACvB;AAET;AA3BIN,IAAA,eACAC,IAAA;ACJJ,MAAMS,IAAoB;AAAA,EACxB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,SAAS,MAAM,OAAO,yBAAa;AAAA,EACnC,aAAa;AAAA,EACb,QAAQ;AAAA,EACR,MAAM;AAAA,IACJ,OAAO;AAAA,IACP,UAAU;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACV;AAAA,MACE,OAAO;AAAA,MACP,OAAO;AAAA,IAAA;AAAA,EACT;AAEJ,GAEMC,IAA+B;AAAA,EACpC,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACL,MAAM;AAAA,EACP,QAAQ;AAAA,EACR,KAAKhB;AAAA,EACL,gBAAgB,CAAEiB,CAAyB;AAAA,EAC3C,MAAM;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,EAAA;AAET,GAEMC,IAAe;AAAA,EACjB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,MAAM;AAAA,IACJ,SAAW;AAAA,EACb;AAAA,EACA,IAAK,MAAK,OAAO,kBAAmB;AACxC,GAEaC,IAAyC;AAAA,EACpDJ;AAAA,EACAG;AAAA,EACAF;AACF;"}