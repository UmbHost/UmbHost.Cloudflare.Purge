{"version":3,"file":"umb-host-cloudflare-purge.js","sources":["../../../Client/src/trees/purge-tree-entity.action.ts","../../../Client/src/bundle.manifests.ts"],"sourcesContent":["import { UmbEntityActionArgs, UmbEntityActionBase } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbModalManagerContext, UMB_MODAL_MANAGER_CONTEXT, UMB_CONFIRM_MODAL } from '@umbraco-cms/backoffice/modal'\r\nimport { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbLocalizationController } from '@umbraco-cms/backoffice/localization-api';\r\n\r\nexport class PurdeCdnEntityAction extends UmbEntityActionBase<never> {\r\n    #modalContext?: UmbModalManagerContext;\r\n    #localize = new UmbLocalizationController(this);\r\n\r\n    constructor(host: UmbControllerHost, args: UmbEntityActionArgs<never>) {\r\n        super(host, args);\r\n\r\n        // Fetch/consume the contexts & assign to the private fields\r\n        this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n            this.#modalContext = instance;\r\n        });\r\n    }\r\n\r\n    async execute() {\r\n        const modalHandler = this.#modalContext?.open(this, UMB_CONFIRM_MODAL, {\r\n            data: {\r\n                headline: this.#localize.term(\"umbhostCloudflarePurge_confirmpurgecdnentityactiontitle\"),\r\n                content: this.#localize.term(\"umbhostCloudflarePurge_confirmpurgecdnentityactioncontent\"),\r\n                color: 'danger',\r\n            }\r\n        });\r\n\r\n        await modalHandler?.onSubmit().then(() => {\r\n            console.log('submit');\r\n        }).catch(() => {\r\n            console.log('cancel');\r\n        });\r\n    }\r\n}","import { UMB_DOCUMENT_ENTITY_TYPE } from \"@umbraco-cms/backoffice/document\";\r\nimport { PurdeCdnEntityAction } from \"./trees/purge-tree-entity.action\"\r\nimport { UMB_MEDIA_ENTITY_TYPE } from \"@umbraco-cms/backoffice/media\";\r\nimport { UMB_SETTINGS_SECTION_ALIAS } from \"@umbraco-cms/backoffice/settings\";\r\n\r\nconst dashboardManifest = {\r\n  type: 'dashboard',\r\n  alias: 'umbhost-cloudflare-purge-dashboard',\r\n  name: 'Cloudflare CDN Purge Dashboard',\r\n  element: () => import('./dashboards/purge-dashboard'),\r\n  elementName: \"umbhost-cloudflare-purge-dashboard\",\r\n  weight: 30,\r\n  meta: {\r\n    label: \"Cloudflare CDN Purge Dashboard\",\r\n    pathname: \"umbhost-cloudflare-purge-dashboard\"\r\n  },\r\n  conditions: [\r\n    {\r\n      alias: \"Umb.Condition.SectionAlias\",\r\n      match: \"Umb.Section.Content\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst purgeCdnEntityActionManifest = {\r\n  type: 'entityAction',\r\n  alias: 'umbhost-cloudflare-purge-cdn-entity-action',\r\n  name: 'Cloudflare CDN Purge Entity Action',\r\n  kind: 'default',\r\n  weight: 50,\r\n  api: PurdeCdnEntityAction,\r\n  forEntityTypes: [UMB_DOCUMENT_ENTITY_TYPE, UMB_MEDIA_ENTITY_TYPE],\r\n  meta: {\r\n    icon: 'icon-cloud',\r\n    label: '#umbhostCloudflarePurge_entityactionlabel'\r\n  },\r\n};\r\n\r\nconst menu = {\r\n  type: 'menu',\r\n  alias: 'umbhost-cloudflare-purge-settings-menu',\r\n  name: 'Cloudflare CDN Purge Settings Menu',\r\n}\r\n\r\nconst settingsMenu = {\r\n  type: 'sectionSidebarApp',\r\n  kind: 'menu',\r\n  alias: 'umbhost-cloudflare-purge-settings-sidebar-menu',\r\n  name: 'Cloudflare CDN Purge Settings Menu',\r\n  weight: -100,\r\n  meta: {\r\n    label: '#umbhostCloudflarePurge_cloudflare',\r\n    menu: 'umbhost-cloudflare-purge-settings-menu',\r\n  },\r\n  conditions: [\r\n    {\r\n      alias: 'Umb.Condition.SectionAlias',\r\n      match: UMB_SETTINGS_SECTION_ALIAS,\r\n    },\r\n  ],\r\n}\r\n\r\nconst settingsMenuItem = {\r\n  type: 'menuItem',\r\n  alias: 'umbhost-cloudflare-purge-settings-menu-item',\r\n  name: 'Cloudflare CDN Purge Settings Menu Item',\r\n  // element: uSyncMenuElement,\r\n  meta: {\r\n    label: '#umbhostCloudflarePurge_settingsoverview',\r\n    icon: 'icon-cloud',\r\n    entityType: 'umbhost-cloudflare-purge/settings-root',\r\n    menus: ['umbhost-cloudflare-purge-settings-menu'],\r\n  },\r\n};\r\n\r\nconst settingsWorkspace = {\r\n  type: 'workspace',\r\n  kind: 'default',\r\n  alias: \"umbhost-cloudflare-purge-workspace\",\r\n  name: 'Cloudflare CDN Purge Settings Workspace',\r\n  meta: {\r\n    entityType: \"umbhost-cloudflare-purge\",\r\n    headline: '#umbhostCloudflarePurge_workspace',\r\n  },\r\n}\r\n\r\nconst settingsOverview = {\r\n  \"type\": \"workspaceView\",\r\n  \"alias\": \"umbhost-cloudflare-purge-settings-overview\",\r\n  \"name\": \"Cloudflare CDN Purge Settings Overview\",\r\n  element: () => import('./workspaces/overview'),\r\n  elementName: \"my-workspaceview\",\r\n  \"meta\": {\r\n    \"label\": \"My Workspace View\",\r\n    \"pathname\": \"/settings-root\",\r\n    \"icon\": \"icon-add\"\r\n  },\r\n  \"conditions\": [\r\n    {\r\n      \"alias\": \"Umb.Condition.WorkspaceAlias\",\r\n      \"match\": \"umbhost-cloudflare-purge-workspace\"\r\n    }\r\n  ]\r\n}\r\n\r\nconst localization = {\r\n  type: \"localization\",\r\n  alias: \"umbhost-cloudflare-purge-localize-en\",\r\n  name: \"Cloudflare CDN Purge Localization\",\r\n  meta: {\r\n    \"culture\": \"en\"\r\n  },\r\n  js: () => import('./localization/en')\r\n};\r\n\r\nexport const manifests: Array<UmbExtensionManifest> = [\r\n  dashboardManifest,\r\n  localization,\r\n  purgeCdnEntityActionManifest,\r\n  menu,\r\n  settingsMenu,\r\n  settingsMenuItem,\r\n  settingsWorkspace,\r\n  settingsOverview\r\n];"],"names":["PurdeCdnEntityAction","UmbEntityActionBase","host","args","__privateAdd","_modalContext","_localize","UmbLocalizationController","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","modalHandler","_a","__privateGet","UMB_CONFIRM_MODAL","dashboardManifest","purgeCdnEntityActionManifest","UMB_DOCUMENT_ENTITY_TYPE","UMB_MEDIA_ENTITY_TYPE","menu","settingsMenu","UMB_SETTINGS_SECTION_ALIAS","settingsMenuItem","settingsWorkspace","settingsOverview","localization","manifests"],"mappings":"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"}